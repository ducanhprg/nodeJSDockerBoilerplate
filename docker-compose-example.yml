services:
  request_handler:
    build:
      context: ${REQUEST_HANDLER_CONTEXT}
      dockerfile: ../../configs/Dockerfile
    container_name: ${REQUEST_HANDLER_NAME}
    ports:
      - "${REQUEST_HANDLER_PORT}:3000"
    volumes:
      - ${REQUEST_HANDLER_CONTEXT}:/usr/src/app
    command: npm run dev
    networks:
      - default

  vendor_consolidator:
    build:
      context: ${VENDOR_CONSOLIDATOR_CONTEXT}
      dockerfile: ../../configs/Dockerfile
    container_name: ${VENDOR_CONSOLIDATOR_NAME}
    ports:
      - "${VENDOR_CONSOLIDATOR_PORT}:3004"
    volumes:
      - ${VENDOR_CONSOLIDATOR_CONTEXT}:/usr/src/app
    command: npx ts-node -r tsconfig-paths/register src/entrypoints/queueConsumer.ts
    networks:
      - default

  # cost_surcharge_collector:
  #   build:
  #     context: ${COST_SURCHARGE_COLLECTOR_CONTEXT}
  #     dockerfile: ../../configs/Dockerfile
  #   container_name: ${COST_SURCHARGE_COLLECTOR_NAME}
  #   ports:
  #     - "${COST_SURCHARGE_COLLECTOR_PORT}:3000"
  #   volumes:
  #    - ${COST_SURCHARGE_COLLECTOR_CONTEXT}:/usr/src/app
  #   command: npx ts-node -r tsconfig-paths/register src/entrypoints/queueConsumer.ts
  #   networks:
  #     - docker-network

networks:
  default:
    name: ${GLOBAL_NETWORK_NAME}
    external: true
